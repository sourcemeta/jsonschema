macro(add_jsonschema_test_unix name)
  if(UNIX)
    add_test(NAME JSONSchema.${name} COMMAND
      "${CMAKE_CURRENT_SOURCE_DIR}/${name}.sh"
      "$<TARGET_FILE:jsonschema_cli>")
  endif()
endmacro()

macro(add_jsonschema_test_unix_ci name)
  if(JSONSCHEMA_TESTS_CI AND UNIX)
    add_test(NAME JSONSchema.ci.${name} COMMAND
      "${CMAKE_CURRENT_SOURCE_DIR}/ci/${name}.sh"
      "$<TARGET_FILE:jsonschema_cli>")
  endif()
endmacro()

add_jsonschema_test_unix(version_consistency)
add_jsonschema_test_unix(version_command)
add_jsonschema_test_unix(version_option_long)
add_jsonschema_test_unix(version_option_short)
add_jsonschema_test_unix(help_command)
add_jsonschema_test_unix(help_option_long)
add_jsonschema_test_unix(help_option_short)
add_jsonschema_test_unix(unknown_command)
add_jsonschema_test_unix(unknown_option)
add_jsonschema_test_unix(option_without_value)
add_jsonschema_test_unix(flag_with_value)
add_jsonschema_test_unix(autocomplete_bash)
add_jsonschema_test_unix(autocomplete_zsh)

# Format
add_jsonschema_test_unix(format/pass_single)
add_jsonschema_test_unix(format/pass_single_keep_ordering)
add_jsonschema_test_unix(format/fail_invalid_path)
add_jsonschema_test_unix(format/pass_directory)
add_jsonschema_test_unix(format/pass_cwd)
add_jsonschema_test_unix(format/pass_multi_extension)
add_jsonschema_test_unix(format/pass_yaml)
add_jsonschema_test_unix(format/pass_check_yaml)
add_jsonschema_test_unix(format/fail_check_single)
add_jsonschema_test_unix(format/fail_check_many)
add_jsonschema_test_unix(format/pass_check_single)
add_jsonschema_test_unix(format/pass_check_single_verbose)
add_jsonschema_test_unix(format/pass_check_single_keep_ordering)
add_jsonschema_test_unix(format/pass_directory_ignore_directory)
add_jsonschema_test_unix(format/pass_directory_ignore_file)
add_jsonschema_test_unix(format/fail_check_single_invalid)
add_jsonschema_test_unix(format/fail_check_single_indentation)
add_jsonschema_test_unix(format/pass_check_single_indentation)
add_jsonschema_test_unix(format/pass_single_indentation)
add_jsonschema_test_unix(format/pass_single_intact_mtime)
add_jsonschema_test_unix(format/pass_config_path)
add_jsonschema_test_unix(format/pass_config_path_custom_extension)
add_jsonschema_test_unix(format/pass_config_path_custom_extension_union)
add_jsonschema_test_unix(format/fail_no_dialect)
add_jsonschema_test_unix(format/fail_unknown_metaschema)
add_jsonschema_test_unix(format/pass_default_dialect)
add_jsonschema_test_unix(format/pass_default_dialect_config)
add_jsonschema_test_unix(format/pass_default_dialect_config_relative)
add_jsonschema_test_unix(format/pass_bignum_real)
add_jsonschema_test_unix(format/pass_check_single_json)
add_jsonschema_test_unix(format/fail_check_single_json)
add_jsonschema_test_unix(format/fail_check_many_json)
add_jsonschema_test_unix(format/fail_check_single_json_indentation)
add_jsonschema_test_unix(format/pass_without_extension_json)
add_jsonschema_test_unix(format/fail_without_extension_yaml)
add_jsonschema_test_unix(format/pass_extension_empty_json)
add_jsonschema_test_unix(format/fail_extension_empty_yaml)
add_jsonschema_test_unix(format/pass_custom_extension_json)
add_jsonschema_test_unix(format/fail_custom_extension_yaml)
add_jsonschema_test_unix(format/fail_invalid_id_type)
add_jsonschema_test_unix(format/fail_invalid_schema_uri)

# Validate
add_jsonschema_test_unix(validate/fail_instance_enoent)
add_jsonschema_test_unix(validate/fail_instance_invalid_json)
add_jsonschema_test_unix(validate/fail_invalid_ref)
add_jsonschema_test_unix(validate/fail_no_schema)
add_jsonschema_test_unix(validate/fail_relative_external_ref_missing)
add_jsonschema_test_unix(validate/fail_resolve_enoent)
add_jsonschema_test_unix(validate/fail_resolve_directory_with_invalid_json)
add_jsonschema_test_unix(validate/fail_resolve_invalid_json)
add_jsonschema_test_unix(validate/fail_resolve_missing_open_brace)
add_jsonschema_test_unix(validate/fail_schema_directory)
add_jsonschema_test_unix(validate/pass_directory)
add_jsonschema_test_unix(validate/pass_directory_verbose)
add_jsonschema_test_unix(validate/fail_directory)
add_jsonschema_test_unix(validate/fail_directory_verbose)
add_jsonschema_test_unix(validate/fail_directory_json)
add_jsonschema_test_unix(validate/pass_directory_extension)
add_jsonschema_test_unix(validate/pass_directory_extension_verbose)
add_jsonschema_test_unix(validate/pass_directory_ignore)
add_jsonschema_test_unix(validate/pass_directory_ignore_verbose)
add_jsonschema_test_unix(validate/pass_directory_multiple)
add_jsonschema_test_unix(validate/pass_directory_and_file)
add_jsonschema_test_unix(validate/pass_directory_ignore_jsonl)
add_jsonschema_test_unix(validate/pass_cwd)
add_jsonschema_test_unix(validate/pass_directory_fast)
add_jsonschema_test_unix(validate/fail_directory_fast)
add_jsonschema_test_unix(validate/pass_directory_fast_json)
add_jsonschema_test_unix(validate/fail_directory_fast_json)
add_jsonschema_test_unix(validate/fail_schema_enoent)
add_jsonschema_test_unix(validate/fail_schema_invalid_json)
add_jsonschema_test_unix(validate/fail_schema_non_schema)
add_jsonschema_test_unix(validate/fail_schema_unknown_dialect)
add_jsonschema_test_unix(validate/pass_jsonl_bigint)
add_jsonschema_test_unix(validate/fail_trace)
add_jsonschema_test_unix(validate/fail_trace_fast)
add_jsonschema_test_unix(validate/fail_trace_jsonl)
add_jsonschema_test_unix(validate/fail_trace_multiple)
add_jsonschema_test_unix(validate/fail_trace_directory)
add_jsonschema_test_unix(validate/pass_trace)
add_jsonschema_test_unix(validate/pass_trace_fast)
add_jsonschema_test_unix(validate/pass_trace_unknown_keyword)
add_jsonschema_test_unix(validate/pass_resolve)
add_jsonschema_test_unix(validate/pass_resolve_custom_extension)
add_jsonschema_test_unix(validate/pass_resolve_without_identifier)
add_jsonschema_test_unix(validate/pass_resolve_verbose)
add_jsonschema_test_unix(validate/pass_verbose)
add_jsonschema_test_unix(validate/pass_draft4)
add_jsonschema_test_unix(validate/pass_draft6)
add_jsonschema_test_unix(validate/pass_draft7)
add_jsonschema_test_unix(validate/fail_draft7_top_level_ref)
add_jsonschema_test_unix(validate/pass_2019_09)
add_jsonschema_test_unix(validate/pass_2020_12)
add_jsonschema_test_unix(validate/pass_2020_12_default_dialect)
add_jsonschema_test_unix(validate/pass_2020_12_default_dialect_config)
add_jsonschema_test_unix(validate/pass_2020_12_default_dialect_config_relative)
add_jsonschema_test_unix(validate/pass_2020_12_default_dialect_config_parent)
add_jsonschema_test_unix(validate/pass_2020_12_fast)
add_jsonschema_test_unix(validate/fail_invalid_config)
add_jsonschema_test_unix(validate/fail_draft4)
add_jsonschema_test_unix(validate/fail_draft6)
add_jsonschema_test_unix(validate/fail_draft7)
add_jsonschema_test_unix(validate/fail_2019_09)
add_jsonschema_test_unix(validate/fail_2020_12)
add_jsonschema_test_unix(validate/fail_2020_12_fast)
add_jsonschema_test_unix(validate/pass_jsonl)
add_jsonschema_test_unix(validate/pass_jsonl_empty)
add_jsonschema_test_unix(validate/pass_jsonl_empty_verbose)
add_jsonschema_test_unix(validate/pass_jsonl_verbose)
add_jsonschema_test_unix(validate/fail_jsonl_invalid_entry)
add_jsonschema_test_unix(validate/fail_jsonl_one)
add_jsonschema_test_unix(validate/fail_jsonl_one_verbose)
add_jsonschema_test_unix(validate/fail_jsonl_all)
add_jsonschema_test_unix(validate/fail_jsonl_all_verbose)
add_jsonschema_test_unix(validate/pass_many)
add_jsonschema_test_unix(validate/pass_many_verbose)
add_jsonschema_test_unix(validate/fail_many)
add_jsonschema_test_unix(validate/fail_many_verbose)
add_jsonschema_test_unix(validate/fail_yaml)
add_jsonschema_test_unix(validate/pass_yaml_multi)
add_jsonschema_test_unix(validate/pass_yaml_multi_verbose)
add_jsonschema_test_unix(validate/pass_yaml_multi_json)
add_jsonschema_test_unix(validate/fail_yaml_multi_one)
add_jsonschema_test_unix(validate/fail_yaml_multi_one_verbose)
add_jsonschema_test_unix(validate/fail_yaml_multi_one_json)
add_jsonschema_test_unix(validate/fail_yaml_multi_blank_lines)
add_jsonschema_test_unix(validate/pass_json_ref_yaml)
add_jsonschema_test_unix(validate/pass_process_substitution)
add_jsonschema_test_unix(validate/pass_2020_12_fast_with_template)
add_jsonschema_test_unix(validate/pass_2020_12_with_template)
add_jsonschema_test_unix(validate/pass_trace_with_template)
add_jsonschema_test_unix(validate/pass_verbose_with_template)
add_jsonschema_test_unix(validate/pass_with_invalid_template)
add_jsonschema_test_unix(validate/pass_with_invalid_template_verbose)
add_jsonschema_test_unix(validate/pass_no_identifier_ref)
add_jsonschema_test_unix(validate/pass_no_identifier_half_ref)
add_jsonschema_test_unix(validate/pass_no_identifier_ref_without_resolve)
add_jsonschema_test_unix(validate/fail_no_identifier_ref_without_resolve)
add_jsonschema_test_unix(validate/fail_json)
add_jsonschema_test_unix(validate/pass_json)
add_jsonschema_test_unix(validate/pass_json_fast)
add_jsonschema_test_unix(validate/pass_json_no_identifier)
add_jsonschema_test_unix(validate/pass_jsonl_json)
add_jsonschema_test_unix(validate/pass_jsonl_json_verbose)
add_jsonschema_test_unix(validate/fail_jsonl_one_json)
add_jsonschema_test_unix(validate/fail_jsonl_one_json_verbose)
add_jsonschema_test_unix(validate/pass_benchmark)
add_jsonschema_test_unix(validate/fail_benchmark)
add_jsonschema_test_unix(validate/fail_benchmark_multiple)
add_jsonschema_test_unix(validate/fail_benchmark_directory)
add_jsonschema_test_unix(validate/pass_benchmark_loop)
add_jsonschema_test_unix(validate/pass_benchmark_loop_jsonl)
add_jsonschema_test_unix(validate/fail_benchmark_zero)
add_jsonschema_test_unix(validate/fail_default_dialect_config_extension_mismatch)
add_jsonschema_test_unix(validate/pass_resolve_remap)
add_jsonschema_test_unix(validate/pass_resolve_remap_relative)
add_jsonschema_test_unix(validate/pass_without_extension_json)
add_jsonschema_test_unix(validate/pass_without_extension_yaml)
add_jsonschema_test_unix(validate/pass_extension_empty_json)
add_jsonschema_test_unix(validate/pass_extension_empty_yaml)
add_jsonschema_test_unix(validate/pass_custom_extension_json)
add_jsonschema_test_unix(validate/pass_custom_extension_yaml)
add_jsonschema_test_unix(validate/fail_invalid_id_type)
add_jsonschema_test_unix(validate/fail_invalid_schema_uri)

# Metaschema
add_jsonschema_test_unix(metaschema/pass_trace)
add_jsonschema_test_unix(metaschema/fail_trace)
add_jsonschema_test_unix(metaschema/fail_directory)
add_jsonschema_test_unix(metaschema/fail_single)
add_jsonschema_test_unix(metaschema/fail_yaml)
add_jsonschema_test_unix(metaschema/fail_non_schema)
add_jsonschema_test_unix(metaschema/fail_no_dialect)
add_jsonschema_test_unix(metaschema/fail_default_dialect_config_extension_mismatch)
add_jsonschema_test_unix(metaschema/pass_cwd)
add_jsonschema_test_unix(metaschema/pass_single)
add_jsonschema_test_unix(metaschema/pass_2020_12)
add_jsonschema_test_unix(metaschema/pass_2020_12_default_dialect)
add_jsonschema_test_unix(metaschema/pass_2020_12_default_dialect_config)
add_jsonschema_test_unix(metaschema/pass_2020_12_default_dialect_config_relative)
add_jsonschema_test_unix(metaschema/pass_json)
add_jsonschema_test_unix(metaschema/fail_json)
add_jsonschema_test_unix(metaschema/fail_directory_json)
add_jsonschema_test_unix(metaschema/fail_directory_non_resolved)
add_jsonschema_test_unix(metaschema/pass_2020_12_with_fragment)
add_jsonschema_test_unix(metaschema/pass_draft7_without_fragment)
add_jsonschema_test_unix(metaschema/fail_relative_file_metaschema_ref)
add_jsonschema_test_unix(metaschema/pass_custom_config_resolve)
add_jsonschema_test_unix(metaschema/pass_config_path)
add_jsonschema_test_unix(metaschema/fail_config_path_enoent)
add_jsonschema_test_unix(metaschema/pass_without_extension_json)
add_jsonschema_test_unix(metaschema/pass_without_extension_yaml)
add_jsonschema_test_unix(metaschema/pass_extension_empty_json)
add_jsonschema_test_unix(metaschema/pass_extension_empty_yaml)
add_jsonschema_test_unix(metaschema/pass_custom_extension_json)
add_jsonschema_test_unix(metaschema/pass_custom_extension_yaml)

# Test
add_jsonschema_test_unix(test/fail_resolve_directory_non_schema)
add_jsonschema_test_unix(test/fail_additional_properties)
add_jsonschema_test_unix(test/fail_true_single_resolve)
add_jsonschema_test_unix(test/fail_true_single_resolve_verbose)
add_jsonschema_test_unix(test/fail_false_single_resolve)
add_jsonschema_test_unix(test/fail_false_single_resolve_verbose)
add_jsonschema_test_unix(test/fail_multi_test)
add_jsonschema_test_unix(test/fail_multi_resolve)
add_jsonschema_test_unix(test/fail_multi_resolve_verbose)
add_jsonschema_test_unix(test/fail_unresolvable)
add_jsonschema_test_unix(test/fail_unresolvable_fragment)
add_jsonschema_test_unix(test/fail_unresolvable_anchor)
add_jsonschema_test_unix(test/fail_not_object)
add_jsonschema_test_unix(test/fail_no_schema)
add_jsonschema_test_unix(test/fail_schema_non_string)
add_jsonschema_test_unix(test/fail_no_tests)
add_jsonschema_test_unix(test/fail_anyof)
add_jsonschema_test_unix(test/fail_tests_non_array)
add_jsonschema_test_unix(test/fail_test_case_non_object)
add_jsonschema_test_unix(test/fail_test_case_no_data)
add_jsonschema_test_unix(test/fail_test_case_data_and_data_path)
add_jsonschema_test_unix(test/fail_test_case_non_string_description)
add_jsonschema_test_unix(test/fail_test_case_non_string_data_path)
add_jsonschema_test_unix(test/fail_test_case_no_valid)
add_jsonschema_test_unix(test/fail_test_case_non_boolean_valid)
add_jsonschema_test_unix(test/fail_true_resolve_fragment)
add_jsonschema_test_unix(test/pass_empty)
add_jsonschema_test_unix(test/pass_empty_verbose)
add_jsonschema_test_unix(test/pass_single_yaml)
add_jsonschema_test_unix(test/pass_single_resolve)
add_jsonschema_test_unix(test/pass_single_resolve_default_dialect)
add_jsonschema_test_unix(test/pass_single_resolve_default_dialect_config)
add_jsonschema_test_unix(test/pass_single_resolve_default_dialect_config_relative)
add_jsonschema_test_unix(test/pass_single_resolve_verbose)
add_jsonschema_test_unix(test/pass_single_resolve_fragment)
add_jsonschema_test_unix(test/pass_single_resolve_fragment_verbose)
add_jsonschema_test_unix(test/pass_single_comment_verbose)
add_jsonschema_test_unix(test/pass_single_no_description_verbose)
add_jsonschema_test_unix(test/pass_single_no_test_description_verbose)
add_jsonschema_test_unix(test/pass_single_data_path)
add_jsonschema_test_unix(test/pass_single_data_path_verbose)
add_jsonschema_test_unix(test/pass_multi_directory_resolve)
add_jsonschema_test_unix(test/pass_multi_directory_resolve_verbose)
add_jsonschema_test_unix(test/pass_file_target_with_resolve)
add_jsonschema_test_unix(test/pass_file_target_with_resolve_verbose)
add_jsonschema_test_unix(test/pass_file_target_without_resolve)
add_jsonschema_test_unix(test/pass_file_target_without_resolve_verbose)
add_jsonschema_test_unix(test/pass_file_target_without_resolve_json)
add_jsonschema_test_unix(test/pass_file_target_fragment)
add_jsonschema_test_unix(test/pass_single_resolve_remap)
add_jsonschema_test_unix(test/pass_single_resolve_remap_relative)
add_jsonschema_test_unix(test/pass_config_path)
add_jsonschema_test_unix(test/pass_without_extension_json)
add_jsonschema_test_unix(test/pass_without_extension_yaml)
add_jsonschema_test_unix(test/pass_extension_empty_json)
add_jsonschema_test_unix(test/pass_extension_empty_yaml)
add_jsonschema_test_unix(test/pass_target_no_extension_json)
add_jsonschema_test_unix(test/pass_target_no_extension_yaml)
add_jsonschema_test_unix(test/pass_custom_extension_json)
add_jsonschema_test_unix(test/pass_custom_extension_yaml)
add_jsonschema_test_unix(test/pass_single_resolve_json)
add_jsonschema_test_unix(test/pass_single_no_description_json)
add_jsonschema_test_unix(test/fail_true_single_resolve_json)
add_jsonschema_test_unix(test/fail_false_single_resolve_json)
add_jsonschema_test_unix(test/fail_unresolvable_json)

# Bundle
add_jsonschema_test_unix(bundle/pass_into_resolve_directory)
add_jsonschema_test_unix(bundle/pass_resolve_directory)
add_jsonschema_test_unix(bundle/pass_resolve_directory_verbose)
add_jsonschema_test_unix(bundle/pass_resolve_metaschema)
add_jsonschema_test_unix(bundle/pass_resolve_single)
add_jsonschema_test_unix(bundle/pass_resolve_single_default_dialect)
add_jsonschema_test_unix(bundle/pass_resolve_yaml)
add_jsonschema_test_unix(bundle/pass_resolve_with_ignore)
add_jsonschema_test_unix(bundle/pass_resolve_no_identifier)
add_jsonschema_test_unix(bundle/pass_without_id)
add_jsonschema_test_unix(bundle/pass_without_id_verbose)
add_jsonschema_test_unix(bundle/pass_without_remote)
add_jsonschema_test_unix(bundle/fail_no_schema)
add_jsonschema_test_unix(bundle/fail_relative_external_ref_missing)
add_jsonschema_test_unix(bundle/fail_resolve_duplicate)
add_jsonschema_test_unix(bundle/fail_resolve_invalid_json)
add_jsonschema_test_unix(bundle/fail_schema_invalid_json)
add_jsonschema_test_unix(bundle/fail_unknown_metaschema)
add_jsonschema_test_unix(bundle/fail_default_dialect_config_extension_mismatch)
add_jsonschema_test_unix(bundle/pass_bigint)
add_jsonschema_test_unix(bundle/pass_resolve_default_dialect_config)
add_jsonschema_test_unix(bundle/pass_resolve_default_dialect_config_relative)
add_jsonschema_test_unix(bundle/pass_resolve_single_remap)
add_jsonschema_test_unix(bundle/pass_resolve_single_remap_relative)
add_jsonschema_test_unix(bundle/pass_without_extension_json)
add_jsonschema_test_unix(bundle/pass_without_extension_yaml)
add_jsonschema_test_unix(bundle/pass_custom_extension_json)
add_jsonschema_test_unix(bundle/pass_custom_extension_yaml)
add_jsonschema_test_unix(bundle/fail_invalid_id_type)
add_jsonschema_test_unix(bundle/fail_invalid_schema_uri)

# Inspect
add_jsonschema_test_unix(inspect/pass)
add_jsonschema_test_unix(inspect/pass_no_identifier)
add_jsonschema_test_unix(inspect/pass_default_dialect)
add_jsonschema_test_unix(inspect/pass_default_dialect_config)
add_jsonschema_test_unix(inspect/pass_default_dialect_config_relative)
add_jsonschema_test_unix(inspect/pass_default_dialect_option_config)
add_jsonschema_test_unix(inspect/pass_yaml)
add_jsonschema_test_unix(inspect/pass_json_output)
add_jsonschema_test_unix(inspect/fail_no_schema)
add_jsonschema_test_unix(inspect/fail_schema_invalid_json)
add_jsonschema_test_unix(inspect/fail_unknown_metaschema)
add_jsonschema_test_unix(inspect/fail_default_dialect_config_extension_mismatch)
add_jsonschema_test_unix(inspect/fail_relative_file_metaschema_ref)
add_jsonschema_test_unix(inspect/pass_without_extension_json)
add_jsonschema_test_unix(inspect/pass_without_extension_yaml)
add_jsonschema_test_unix(inspect/pass_custom_extension_json)
add_jsonschema_test_unix(inspect/pass_custom_extension_yaml)
add_jsonschema_test_unix(inspect/fail_invalid_id_type)
add_jsonschema_test_unix(inspect/fail_invalid_schema_uri)

# Compile
add_jsonschema_test_unix(compile/pass)
add_jsonschema_test_unix(compile/pass_patternproperties)
add_jsonschema_test_unix(compile/pass_minify)
add_jsonschema_test_unix(compile/pass_no_identifier)
add_jsonschema_test_unix(compile/pass_fast)
add_jsonschema_test_unix(compile/pass_default_dialect)
add_jsonschema_test_unix(compile/pass_default_dialect_config)
add_jsonschema_test_unix(compile/pass_default_dialect_config_relative)
add_jsonschema_test_unix(compile/pass_yaml)
add_jsonschema_test_unix(compile/fail_no_schema)
add_jsonschema_test_unix(compile/fail_schema_invalid_json)
add_jsonschema_test_unix(compile/fail_unknown_metaschema)
add_jsonschema_test_unix(compile/fail_default_dialect_config_extension_mismatch)
add_jsonschema_test_unix(compile/pass_resolve_remap)
add_jsonschema_test_unix(compile/pass_resolve_remap_relative)
add_jsonschema_test_unix(compile/pass_without_extension_json)
add_jsonschema_test_unix(compile/pass_without_extension_yaml)
add_jsonschema_test_unix(compile/pass_custom_extension_json)
add_jsonschema_test_unix(compile/pass_custom_extension_yaml)
add_jsonschema_test_unix(compile/pass_include)
add_jsonschema_test_unix(compile/pass_include_lowercase)
add_jsonschema_test_unix(compile/pass_include_short)
add_jsonschema_test_unix(compile/fail_include_invalid_identifier)
add_jsonschema_test_unix(compile/fail_invalid_id_type)
add_jsonschema_test_unix(compile/fail_invalid_schema_uri)

# Canonicalize
add_jsonschema_test_unix(canonicalize/pass_input_unmodified)
add_jsonschema_test_unix(canonicalize/pass_resolve)
add_jsonschema_test_unix(canonicalize/pass_default_dialect)
add_jsonschema_test_unix(canonicalize/pass_yaml)
add_jsonschema_test_unix(canonicalize/pass_without_extension_json)
add_jsonschema_test_unix(canonicalize/pass_without_extension_yaml)
add_jsonschema_test_unix(canonicalize/pass_custom_extension_json)
add_jsonschema_test_unix(canonicalize/pass_custom_extension_yaml)
add_jsonschema_test_unix(canonicalize/fail_no_schema)
add_jsonschema_test_unix(canonicalize/fail_non_schema)
add_jsonschema_test_unix(canonicalize/fail_unknown_metaschema)
add_jsonschema_test_unix(canonicalize/fail_invalid_id_type)
add_jsonschema_test_unix(canonicalize/fail_invalid_schema_uri)

# Codegen
add_jsonschema_test_unix(codegen/pass_typescript)
add_jsonschema_test_unix(codegen/pass_typescript_name)
add_jsonschema_test_unix(codegen/pass_typescript_name_short)
add_jsonschema_test_unix(codegen/pass_typescript_explicit)
add_jsonschema_test_unix(codegen/pass_typescript_explicit_short)
add_jsonschema_test_unix(codegen/pass_typescript_ref)
add_jsonschema_test_unix(codegen/pass_typescript_ref_id)
add_jsonschema_test_unix(codegen/pass_custom_extension_json)
add_jsonschema_test_unix(codegen/pass_custom_extension_yaml)
add_jsonschema_test_unix(codegen/pass_default_dialect)
add_jsonschema_test_unix(codegen/pass_default_dialect_config)
add_jsonschema_test_unix(codegen/pass_default_dialect_config_relative)
add_jsonschema_test_unix(codegen/pass_default_dialect_option_config)
add_jsonschema_test_unix(codegen/pass_json_output)
add_jsonschema_test_unix(codegen/pass_yaml)
add_jsonschema_test_unix(codegen/pass_without_extension_json)
add_jsonschema_test_unix(codegen/pass_without_extension_yaml)
add_jsonschema_test_unix(codegen/fail_no_schema)
add_jsonschema_test_unix(codegen/fail_missing_target)
add_jsonschema_test_unix(codegen/fail_invalid_target)
add_jsonschema_test_unix(codegen/fail_schema_invalid_json)
add_jsonschema_test_unix(codegen/fail_unknown_metaschema)
add_jsonschema_test_unix(codegen/fail_default_dialect_config_extension_mismatch)
add_jsonschema_test_unix(codegen/fail_unsupported_vocabulary)
add_jsonschema_test_unix(codegen/fail_unsupported_keyword)
add_jsonschema_test_unix(codegen/fail_unsupported_keyword_value)
add_jsonschema_test_unix(codegen/fail_unsupported_schema)
add_jsonschema_test_unix(codegen/fail_invalid_id_type)
add_jsonschema_test_unix(codegen/fail_invalid_schema_uri)

# Lint
add_jsonschema_test_unix(lint/pass_lint_fix)
add_jsonschema_test_unix(lint/pass_lint_no_fix)
add_jsonschema_test_unix(lint/pass_lint_embedded_resource)
add_jsonschema_test_unix(lint/fail_lint)
add_jsonschema_test_unix(lint/fail_lint_unfixable)
add_jsonschema_test_unix(lint/fail_lint_unfixable_json)
add_jsonschema_test_unix(lint/fail_lint_unfixable_autofix)
add_jsonschema_test_unix(lint/fail_lint_unfixable_autofix_json)
add_jsonschema_test_unix(lint/fail_lint_half_unfixable)
add_jsonschema_test_unix(lint/fail_lint_positions)
add_jsonschema_test_unix(lint/fail_lint_positions_json)
add_jsonschema_test_unix(lint/fail_lint_invalid_embedded_resource)
add_jsonschema_test_unix(lint/fail_lint_with_id)
add_jsonschema_test_unix(lint/fail_lint_fix_broken_reference)
add_jsonschema_test_unix(lint/fail_lint_default_dialect)
add_jsonschema_test_unix(lint/fail_lint_default_dialect_config)
add_jsonschema_test_unix(lint/fail_lint_default_dialect_config_relative)
add_jsonschema_test_unix(lint/fail_lint_yaml)
add_jsonschema_test_unix(lint/fail_lint_fix_yaml)
add_jsonschema_test_unix(lint/fail_lint_fix_yml)
add_jsonschema_test_unix(lint/fail_lint_json)
add_jsonschema_test_unix(lint/fail_lint_non_schema)
add_jsonschema_test_unix(lint/fail_lint_non_schema_fix)
add_jsonschema_test_unix(lint/pass_bigint)
add_jsonschema_test_unix(lint/fail_lint_directory_unresolvable)
add_jsonschema_test_unix(lint/fail_lint_directory_unresolvable_fix)
add_jsonschema_test_unix(lint/fail_lint_directory_unresolvable_dialect)
add_jsonschema_test_unix(lint/fail_lint_directory_json)
add_jsonschema_test_unix(lint/fail_lint_disable_one)
add_jsonschema_test_unix(lint/fail_lint_disable_one_verbose)
add_jsonschema_test_unix(lint/fail_lint_disable_unknown_verbose)
add_jsonschema_test_unix(lint/fail_lint_disable_many)
add_jsonschema_test_unix(lint/fail_lint_examples)
add_jsonschema_test_unix(lint/fail_lint_default)
add_jsonschema_test_unix(lint/pass_lint_json)
add_jsonschema_test_unix(lint/pass_lint_fix_json)
add_jsonschema_test_unix(lint/pass_lint_fix_indentation)
add_jsonschema_test_unix(lint/pass_lint_ignore_short)
add_jsonschema_test_unix(lint/pass_lint_ignore_long)
add_jsonschema_test_unix(lint/pass_lint_examples_fix)
add_jsonschema_test_unix(lint/pass_lint_examples_no_fix)
add_jsonschema_test_unix(lint/pass_lint_default_fix)
add_jsonschema_test_unix(lint/pass_lint_default_no_fix)
add_jsonschema_test_unix(lint/pass_lint_anonymous_default_with_ref)
add_jsonschema_test_unix(lint/pass_lint_anonymous_nested_default_with_ref)
add_jsonschema_test_unix(lint/pass_lint_default_nested_with_id)
add_jsonschema_test_unix(lint/pass_lint_examples_nested_with_id)
add_jsonschema_test_unix(lint/pass_lint_list_exclude)
add_jsonschema_test_unix(lint/pass_lint_list_long)
add_jsonschema_test_unix(lint/pass_lint_list_short)
add_jsonschema_test_unix(lint/pass_lint_list_only_one)
add_jsonschema_test_unix(lint/pass_lint_list_only_many)
add_jsonschema_test_unix(lint/pass_lint_fix_no_reformat)
add_jsonschema_test_unix(lint/pass_lint_directory_resolve_many)
add_jsonschema_test_unix(lint/pass_lint_direct_custom_extension)
add_jsonschema_test_unix(lint/fail_lint_only)
add_jsonschema_test_unix(lint/fail_lint_only_with_exclude)
add_jsonschema_test_unix(lint/fail_lint_only_unknown)
add_jsonschema_test_unix(lint/fail_lint_only_unknown_verbose)
add_jsonschema_test_unix(lint/pass_config_path)
add_jsonschema_test_unix(lint/pass_openapi_3_1)
add_jsonschema_test_unix(lint/pass_openapi_3_2)
add_jsonschema_test_unix(lint/pass_without_extension_json)
add_jsonschema_test_unix(lint/pass_without_extension_yaml)
add_jsonschema_test_unix(lint/pass_extension_empty_json)
add_jsonschema_test_unix(lint/pass_extension_empty_yaml)
add_jsonschema_test_unix(lint/pass_custom_extension_json)
add_jsonschema_test_unix(lint/pass_custom_extension_yaml)
add_jsonschema_test_unix(lint/fail_lint_fix_custom_extension_yaml)
add_jsonschema_test_unix(lint/fail_lint_fix_without_extension_yaml)
add_jsonschema_test_unix(lint/fail_lint_fix_extension_empty_yaml)
add_jsonschema_test_unix(lint/pass_lint_fix_keep_ordering)
add_jsonschema_test_unix(lint/fail_lint_invalid_id_type)
add_jsonschema_test_unix(lint/fail_lint_invalid_id_uri)
add_jsonschema_test_unix(lint/fail_lint_invalid_schema_uri)
add_jsonschema_test_unix(lint/fail_lint_invalid_ref_uri)
add_jsonschema_test_unix(lint/fail_lint_invalid_recursiveref_type)
add_jsonschema_test_unix(lint/fail_lint_id_with_fragment)
add_jsonschema_test_unix(lint/fail_lint_duplicate_id)
add_jsonschema_test_unix(lint/fail_lint_empty_anchor)
add_jsonschema_test_unix(lint/fail_lint_invalid_recursiveanchor_type)
add_jsonschema_test_unix(lint/fail_lint_invalid_schema_type)
add_jsonschema_test_unix(lint/fail_lint_nested_invalid_schema_type)

# Encode
add_jsonschema_test_unix(encode/pass_schema_less)
add_jsonschema_test_unix(encode/pass_schema_less_jsonl)
add_jsonschema_test_unix(encode/pass_schema_less_jsonl_verbose)
add_jsonschema_test_unix(encode/fail_no_document)
add_jsonschema_test_unix(encode/fail_no_output)

# Decode
add_jsonschema_test_unix(decode/pass_schema_less)
add_jsonschema_test_unix(decode/pass_schema_less_jsonl)
add_jsonschema_test_unix(decode/pass_schema_less_jsonl_verbose)
add_jsonschema_test_unix(decode/fail_no_document)
add_jsonschema_test_unix(decode/fail_no_output)

# CI specific tests
add_jsonschema_test_unix_ci(pass_bundle_http)
add_jsonschema_test_unix_ci(fail_bundle_http_non_200)
add_jsonschema_test_unix_ci(fail_bundle_http_non_schema)
add_jsonschema_test_unix_ci(fail_validate_http_non_200)
add_jsonschema_test_unix_ci(fail_validate_http_non_schema)
add_jsonschema_test_unix_ci(pass_validate_http)
add_jsonschema_test_unix_ci(precommit_lint)

# TODO: Make this test pass on Linux. It hangs for some reason
if(APPLE)
  add_jsonschema_test_unix_ci(pass_validate_json_ref_yaml_http)
endif()
